!function(t,e){"use strict";class r{constructor(t,e,r,n,a){this.char=t,this.strokes={b:e,a:r},this.entity=n||!1,this.number=a||!1,this.kerning,this.letterSpace}_addKerning(t){return this.kerning=t}_addLetterSpace(t){return this.letterSpace=t}}class n{constructor(t,e,r){this.pair=t.char+e.char,this.c1={char:t.char,strokes:{b:t.strokes.b,a:t.strokes.a}},this.c2={char:e.char,strokes:{b:e.strokes.b,a:e.strokes.a}},this.kerning=r,this.weight=r.weight,this.letterSpace}_addLetterSpace(t){return this.letterSpace=t}}class a{constructor(t,e){this.code=t,this.weight=e}}class s{constructor(t,e){this.key=t.code+e.code,this.s1={stroke:t.code,weight:t.weight},this.s2={stroke:e.code,weight:e.weight},this.weight=this.calcKerning()}calcKerning(){return Math.round(this.s1.weight+this.s2.weight)}}class b{constructor(t,e,r,n,a,s){this.context=t,this.string=e,this.char=r,this.length=r.length,this.indexes=[n,a],this.isEntity=s||!1}}class i{constructor(t,e,r){this.context=t,this.class="char-"+r,this.indexes=[r],this.char=e.char,this.data=e,this.count=0,this._increaseCount(1)}_increaseCount(t=1){return this.count+=t}}class c{constructor(t,e,r){this.context=t,this.class="char-"+r,this.indexes=[r],this.char=e.char,this.data=e,this.kerning=0,this.count=0,this._increaseCount(1)}_addKerning(t){return this.kerning=t}_increaseCount(t=1){return this.count+=t}_addCharIndex(t){return this.indexes.push(t)}}class h{constructor(t,e,r){this.context=t,this.indexes=[[r,r+1]],this.pair=e.pair,this.c1={char:e.c1.char,strokes:{b:e.c1.strokes.b,a:e.c1.strokes.a}},this.c2={char:e.c2.char,strokes:{b:e.c2.strokes.b,a:e.c2.strokes.a}},this.weight=e.weight,this.kern=null,this.letterSpace=null,this.count=0,this._increaseCount(1),this._calcKerning()}_calcKerning(){let t=parseFloat(getComputedStyle(this.context).fontSize);this.kern=Math.round(100*this.weight/100).toFixed(2)/100*t,this.letterSpace="-"+this.kern.toString().substring(0,5)+"px"}_increaseCount(t=1){return this.count+=t}_addCharIndex(t){return this.indexes.push([t,t+1])}}class u{constructor(t,e,r,n){this.context=t,this.string=e,this.innerHTML=r,this.sequence=n}}
const l=[{char:"a",b:"o",a:"l"},{char:"b",b:"l",a:"o"},{char:"c",b:"o",a:"l"},{char:"d",b:"o",a:"l"},{char:"e",b:"o",a:"o"},{char:"f",b:"l",a:"l"},{char:"g",b:"o",a:"o"},{char:"h",b:"l",a:"l"},{char:"i",b:"l",a:"l"},{char:"j",b:"l",a:"l"},{char:"k",b:"l",a:"l"},{char:"l",b:"l",a:"l"},{char:"m",b:"l",a:"l"},{char:"n",b:"l",a:"l"},{char:"o",b:"o",a:"o"},{char:"p",b:"l",a:"o"},{char:"q",b:"o",a:"l"},{char:"r",b:"l",a:"l"},{char:"s",b:"l",a:"l"},{char:"t",b:"l",a:"s"},{char:"u",b:"s",a:"l"},{char:"v",b:"d",a:"u"},{char:"w",b:"d",a:"u"},{char:"x",b:"l",a:"l"},{char:"y",b:"l",a:"u"},{char:"z",b:"l",a:"l"},{char:"A",b:"u",a:"d"},{char:"B",b:"l",a:"o"},{char:"C",b:"o",a:"l"},{char:"D",b:"l",a:"o"},{char:"E",b:"l",a:"l"},{char:"F",b:"l",a:"u"},{char:"G",b:"o",a:"s"},{char:"H",b:"l",a:"l"},{char:"I",b:"l",a:"l"},{char:"J",b:"s",a:"l"},{char:"K",b:"l",a:"s"},{char:"L",b:"l",a:"s"},{char:"M",b:"l",a:"l"},{char:"N",b:"l",a:"l"},{char:"O",b:"o",a:"o"},{char:"P",b:"l",a:"s"},{char:"Q",b:"o",a:"o"},{char:"R",b:"l",a:"s"},{char:"S",b:"l",a:"l"},{char:"T",b:"d",a:"u"},{char:"U",b:"l",a:"l"},{char:"V",b:"d",a:"u"},{char:"W",b:"d",a:"u"},{char:"X",b:"l",a:"l"},{char:"Y",b:"d",a:"u"},{char:"Z",b:"l",a:"l"},{char:"0",b:"o",a:"o"},{char:"1",b:"l",a:"l"},{char:"2",b:"l",a:"o"},{char:"3",b:"l",a:"o"},{char:"4",b:"u",a:"l"},{char:"5",b:"l",a:"s"},{char:"6",b:"o",a:"o"},{char:"7",b:"l",a:"u"},{char:"8",b:"o",a:"o"},{char:"9",b:"l",a:"o"},{char:" ",b:"n",a:"n"},{char:".",b:"s",a:"n"},{char:",",b:"s",a:"n"},{char:";",b:"s",a:"n"},{char:":",b:"s",a:"n"},{char:"“",b:"n",a:"s"},{char:"”",b:"s",a:"n"},{char:"‘",b:"n",a:"s"},{char:"’",b:"s",a:"n"},{char:"'",b:"s",a:"s"},{char:'"',b:"s",a:"s"},{char:"!",b:"s",a:"n"},{char:"?",b:"s",a:"n"},{char:"@",b:"o",a:"o"},{char:"#",b:"u",a:"u"},{char:"$",b:"l",a:"l"},{char:"%",b:"s",a:"s"},{char:"^",b:"s",a:"s"},{char:"&",b:"o",a:"s"},{char:"*",b:"s",a:"s"},{char:"(",b:"n",a:"s"},{char:")",b:"s",a:"n"},{char:"[",b:"n",a:"s"},{char:"]",b:"s",a:"n"},{char:"{",b:"n",a:"s"},{char:"}",b:"s",a:"n"},{char:"/",b:"s",a:"s"}],m=[{char:" ",b:"s",a:"s",entity:null,number:"&#32;"},{char:"!",b:"s",a:"s",entity:null,number:"&#33;"},{char:'"',b:"s",a:"s",entity:null,number:"&#34;"},{char:"#",b:"s",a:"s",entity:null,number:"&#35;"},{char:"$",b:"s",a:"s",entity:null,number:"&#36;"},{char:"%",b:"s",a:"s",entity:null,number:"&#37;"},{char:"&",b:"s",a:"s",entity:"&amp;",number:"&#38;"},{char:"'",b:"s",a:"s",entity:null,number:"&#39;"},{char:"(",b:"s",a:"s",entity:null,number:"&#40;"},{char:")",b:"s",a:"s",entity:null,number:"&#41;"},{char:"*",b:"s",a:"s",entity:null,number:"&#42;"},{char:"+",b:"s",a:"s",entity:null,number:"&#43;"},{char:",",b:"s",a:"s",entity:null,number:"&#44;"},{char:"-",b:"s",a:"s",entity:null,number:"&#45;"},{char:".",b:"s",a:"s",entity:null,number:"&#46;"},{char:"/",b:"s",a:"s",entity:null,number:"&#47;"},{char:"0",b:"s",a:"s",entity:null,number:"&#48;"},{char:"1",b:"s",a:"s",entity:null,number:"&#49;"},{char:"2",b:"s",a:"s",entity:null,number:"&#50;"},{char:"3",b:"s",a:"s",entity:null,number:"&#51;"},{char:"4",b:"s",a:"s",entity:null,number:"&#52;"},{char:"5",b:"s",a:"s",entity:null,number:"&#53;"},{char:"6",b:"s",a:"s",entity:null,number:"&#54;"},{char:"7",b:"s",a:"s",entity:null,number:"&#55;"},{char:"8",b:"s",a:"s",entity:null,number:"&#56;"},{char:"9",b:"s",a:"s",entity:null,number:"&#57;"},{char:":",b:"s",a:"s",entity:null,number:"&#58;"},{char:";",b:"s",a:"s",entity:null,number:"&#59;"},{char:"<",b:"s",a:"s",entity:"&lt;",number:"&#60;"},{char:"=",b:"s",a:"s",entity:null,number:"&#61;"},{char:">",b:"s",a:"s",entity:"&gt;",number:"&#62;"},{char:"?",b:"s",a:"s",entity:null,number:"&#63;"},{char:"@",b:"s",a:"s",entity:null,number:"&#64;"},{char:"A",b:"s",a:"s",entity:null,number:"&#65;"},{char:"B",b:"s",a:"s",entity:null,number:"&#66;"},{char:"C",b:"s",a:"s",entity:null,number:"&#67;"},{char:"D",b:"s",a:"s",entity:null,number:"&#68;"},{char:"E",b:"s",a:"s",entity:null,number:"&#69;"},{char:"F",b:"s",a:"s",entity:null,number:"&#70;"},{char:"G",b:"s",a:"s",entity:null,number:"&#71;"},{char:"H",b:"s",a:"s",entity:null,number:"&#72;"},{char:"I",b:"s",a:"s",entity:null,number:"&#73;"},{char:"J",b:"s",a:"s",entity:null,number:"&#74;"},{char:"K",b:"s",a:"s",entity:null,number:"&#75;"},{char:"L",b:"s",a:"s",entity:null,number:"&#76;"},{char:"M",b:"s",a:"s",entity:null,number:"&#77;"},{char:"N",b:"s",a:"s",entity:null,number:"&#78;"},{char:"O",b:"s",a:"s",entity:null,number:"&#79;"},{char:"P",b:"s",a:"s",entity:null,number:"&#80;"},{char:"Q",b:"s",a:"s",entity:null,number:"&#81;"},{char:"R",b:"s",a:"s",entity:null,number:"&#82;"},{char:"S",b:"s",a:"s",entity:null,number:"&#83;"},{char:"T",b:"s",a:"s",entity:null,number:"&#84;"},{char:"U",b:"s",a:"s",entity:null,number:"&#85;"},{char:"V",b:"s",a:"s",entity:null,number:"&#86;"},{char:"W",b:"s",a:"s",entity:null,number:"&#87;"},{char:"X",b:"s",a:"s",entity:null,number:"&#88;"},{char:"Y",b:"s",a:"s",entity:null,number:"&#89;"},{char:"Z",b:"s",a:"s",entity:null,number:"&#90;"},{char:"[",b:"s",a:"s",entity:null,number:"&#91;"},{char:"\\",b:"s",a:"s",entity:null,number:"&#92;"},{char:"]",b:"s",a:"s",entity:null,number:"&#93;"},{char:"^",b:"s",a:"s",entity:null,number:"&#94;"},{char:"_",b:"s",a:"s",entity:null,number:"&#95;"},{char:"`",b:"s",a:"s",entity:null,number:"&#96;"},{char:"a",b:"s",a:"s",entity:null,number:"&#97;"},{char:"b",b:"s",a:"s",entity:null,number:"&#98;"},{char:"c",b:"s",a:"s",entity:null,number:"&#99;"},{char:"d",b:"s",a:"s",entity:null,number:"&#100;"},{char:"e",b:"s",a:"s",entity:null,number:"&#101;"},{char:"f",b:"s",a:"s",entity:null,number:"&#102;"},{char:"g",b:"s",a:"s",entity:null,number:"&#103;"},{char:"h",b:"s",a:"s",entity:null,number:"&#104;"},{char:"i",b:"s",a:"s",entity:null,number:"&#105;"},{char:"j",b:"s",a:"s",entity:null,number:"&#106;"},{char:"k",b:"s",a:"s",entity:null,number:"&#107;"},{char:"l",b:"s",a:"s",entity:null,number:"&#108;"},{char:"m",b:"s",a:"s",entity:null,number:"&#109;"},{char:"n",b:"s",a:"s",entity:null,number:"&#110;"},{char:"o",b:"s",a:"s",entity:null,number:"&#111;"},{char:"p",b:"s",a:"s",entity:null,number:"&#112;"},{char:"q",b:"s",a:"s",entity:null,number:"&#113;"},{char:"r",b:"s",a:"s",entity:null,number:"&#114;"},{char:"s",b:"s",a:"s",entity:null,number:"&#115;"},{char:"t",b:"s",a:"s",entity:null,number:"&#116;"},{char:"u",b:"s",a:"s",entity:null,number:"&#117;"},{char:"v",b:"s",a:"s",entity:null,number:"&#118;"},{char:"w",b:"s",a:"s",entity:null,number:"&#119;"},{char:"x",b:"s",a:"s",entity:null,number:"&#120;"},{char:"y",b:"s",a:"s",entity:null,number:"&#121;"},{char:"z",b:"s",a:"s",entity:null,number:"&#122;"},{char:"{",b:"s",a:"s",entity:null,number:"&#123;"},{char:"|",b:"s",a:"s",entity:null,number:"&#124;"},{char:"}",b:"s",a:"s",entity:null,number:"&#125;"},{char:"~",b:"s",a:"s",entity:null,number:"&#126;"},{char:"À",b:"s",a:"s",entity:"&Agrave;",number:"&#192;"},{char:"Á",b:"s",a:"s",entity:"&Aacute;",number:"&#193;"},{char:"Â",b:"s",a:"s",entity:"&Acirc;",number:"&#194;"},{char:"Ã",b:"s",a:"s",entity:"&Atilde;",number:"&#195;"},{char:"Ä",b:"s",a:"s",entity:"&Auml;",number:"&#196;"},{char:"Å",b:"s",a:"s",entity:"&Aring;",number:"&#197;"},{char:"Æ",b:"s",a:"s",entity:"&AElig;",number:"&#198;"},{char:"Ç",b:"s",a:"s",entity:"&Ccedil;",number:"&#199;"},{char:"È",b:"s",a:"s",entity:"&Egrave;",number:"&#200;"},{char:"É",b:"s",a:"s",entity:"&Eacute;",number:"&#201;"},{char:"Ê",b:"s",a:"s",entity:"&Ecirc;",number:"&#202;"},{char:"Ë",b:"s",a:"s",entity:"&Euml;",number:"&#203;"},{char:"Ì",b:"s",a:"s",entity:"&Igrave;",number:"&#204;"},{char:"Í",b:"s",a:"s",entity:"&Iacute;",number:"&#205;"},{char:"Î",b:"s",a:"s",entity:"&Icirc;",number:"&#206;"},{char:"Ï",b:"s",a:"s",entity:"&Iuml;",number:"&#207;"},{char:"Ð",b:"s",a:"s",entity:"&ETH;",number:"&#208;"},{char:"Ñ",b:"s",a:"s",entity:"&Ntilde;",number:"&#209;"},{char:"Ò",b:"s",a:"s",entity:"&Ograve;",number:"&#210;"},{char:"Ó",b:"s",a:"s",entity:"&Oacute;",number:"&#211;"},{char:"Ô",b:"s",a:"s",entity:"&Ocirc;",number:"&#212;"},{char:"Õ",b:"s",a:"s",entity:"&Otilde;",number:"&#213;"},{char:"Ö",b:"s",a:"s",entity:"&Ouml;",number:"&#214;"},{char:"Ø",b:"s",a:"s",entity:"&Oslash;",number:"&#216;"},{char:"Ù",b:"s",a:"s",entity:"&Ugrave;",number:"&#217;"},{char:"Ú",b:"s",a:"s",entity:"&Uacute;",number:"&#218;"},{char:"Û",b:"s",a:"s",entity:"&Ucirc;",number:"&#219;"},{char:"Ü",b:"s",a:"s",entity:"&Uuml;",number:"&#220;"},{char:"Ý",b:"s",a:"s",entity:"&Yacute;",number:"&#221;"},{char:"Þ",b:"s",a:"s",entity:"&THORN;",number:"&#222;"},{char:"ß",b:"s",a:"s",entity:"&szlig;",number:"&#223;"},{char:"à",b:"s",a:"s",entity:"&agrave;",number:"&#224;"},{char:"á",b:"s",a:"s",entity:"&aacute;",number:"&#225;"},{char:"â",b:"s",a:"s",entity:"&acirc;",number:"&#226;"},{char:"ã",b:"s",a:"s",entity:"&atilde;",number:"&#227;"},{char:"ä",b:"s",a:"s",entity:"&auml;",number:"&#228;"},{char:"å",b:"s",a:"s",entity:"&aring;",number:"&#229;"},{char:"æ",b:"s",a:"s",entity:"&aelig;",number:"&#230;"},{char:"ç",b:"s",a:"s",entity:"&ccedil;",number:"&#231;"},{char:"è",b:"s",a:"s",entity:"&egrave;",number:"&#232;"},{char:"é",b:"s",a:"s",entity:"&eacute;",number:"&#233;"},{char:"ê",b:"s",a:"s",entity:"&ecirc;",number:"&#234;"},{char:"ë",b:"s",a:"s",entity:"&euml;",number:"&#235;"},{char:"ì",b:"s",a:"s",entity:"&igrave;",number:"&#236;"},{char:"í",b:"s",a:"s",entity:"&iacute;",number:"&#237;"},{char:"î",b:"s",a:"s",entity:"&icirc;",number:"&#238;"},{char:"ï",b:"s",a:"s",entity:"&iuml;",number:"&#239;"},{char:"ð",b:"s",a:"s",entity:"&eth;",number:"&#240;"},{char:"ñ",b:"s",a:"s",entity:"&ntilde;",number:"&#241;"},{char:"ò",b:"s",a:"s",entity:"&ograve;",number:"&#242;"},{char:"ó",b:"s",a:"s",entity:"&oacute;",number:"&#243;"},{char:"ô",b:"s",a:"s",entity:"&ocirc;",number:"&#244;"},{char:"õ",b:"s",a:"s",entity:"&otilde;",number:"&#245;"},{char:"ö",b:"s",a:"s",entity:"&ouml;",number:"&#246;"},{char:"ø",b:"s",a:"s",entity:"&oslash;",number:"&#248;"},{char:"ù",b:"s",a:"s",entity:"&ugrave;",number:"&#249;"},{char:"ú",b:"s",a:"s",entity:"&uacute;",number:"&#250;"},{char:"û",b:"s",a:"s",entity:"&ucirc;",number:"&#251;"},{char:"ü",b:"s",a:"s",entity:"&uuml;",number:"&#252;"},{char:"ý",b:"s",a:"s",entity:"&yacute;",number:"&#253;"},{char:"þ",b:"s",a:"s",entity:"&thorn;",number:"&#254;"},{char:"ÿ",b:"s",a:"s",entity:"&yuml;",number:"&#255;"},{char:" ",b:"s",a:"s",entity:"&nbsp;",number:"&#160;"},{char:"¡",b:"s",a:"s",entity:"&iexcl;",number:"&#161;"},{char:"¢",b:"s",a:"s",entity:"&cent;",number:"&#162;"},{char:"£",b:"s",a:"s",entity:"&pound;",number:"&#163;"},{char:"¤",b:"s",a:"s",entity:"&curren;",number:"&#164;"},{char:"¥",b:"s",a:"s",entity:"&yen;",number:"&#165;"},{char:"¦",b:"s",a:"s",entity:"&brvbar;",number:"&#166;"},{char:"§",b:"s",a:"s",entity:"&sect;",number:"&#167;"},{char:"¨",b:"s",a:"s",entity:"&uml;",number:"&#168;"},{char:"©",b:"s",a:"s",entity:"&copy;",number:"&#169;"},{char:"ª",b:"s",a:"s",entity:"&ordf;",number:"&#170;"},{char:"«",b:"s",a:"s",entity:"&laquo;",number:"&#171;"},{char:"¬",b:"s",a:"s",entity:"&not;",number:"&#172;"},{char:" ",b:"s",a:"s",entity:"&shy;",number:"&#173;"},{char:"®",b:"s",a:"s",entity:"&reg;",number:"&#174;"},{char:"¯",b:"s",a:"s",entity:"&macr;",number:"&#175;"},{char:"°",b:"s",a:"s",entity:"&deg;",number:"&#176;"},{char:"±",b:"s",a:"s",entity:"&plusmn;",number:"&#177;"},{char:"²",b:"s",a:"s",entity:"&sup2;",number:"&#178;"},{char:"³",b:"s",a:"s",entity:"&sup3;",number:"&#179;"},{char:"´",b:"s",a:"s",entity:"&acute;",number:"&#180;"},{char:"µ",b:"s",a:"s",entity:"&micro;",number:"&#181;"},{char:"¶",b:"s",a:"s",entity:"&para;",number:"&#182;"},{char:"¸",b:"s",a:"s",entity:"&cedil;",number:"&#184;"},{char:"¹",b:"s",a:"s",entity:"&sup1;",number:"&#185;"},{char:"º",b:"s",a:"s",entity:"&ordm;",number:"&#186;"},{char:"»",b:"s",a:"s",entity:"&raquo;",number:"&#187;"},{char:"¼",b:"s",a:"s",entity:"&frac14;",number:"&#188;"},{char:"½",b:"s",a:"s",entity:"&frac12;",number:"&#189;"},{char:"¾",b:"s",a:"s",entity:"&frac34;",number:"&#190;"},{char:"¿",b:"s",a:"s",entity:"&iquest;",number:"&#191;"},{char:"×",b:"s",a:"s",entity:"&times;",number:"&#215;"},{char:"÷",b:"s",a:"s",entity:"&divide;",number:"&#247;"},{char:"∀",b:"s",a:"s",entity:"&forall;",number:"&#8704;"},{char:"∂",b:"s",a:"s",entity:"&part;",number:"&#8706;"},{char:"∃",b:"s",a:"s",entity:"&exist;",number:"&#8707;"},{char:"∅",b:"s",a:"s",entity:"&empty;",number:"&#8709;"},{char:"∇",b:"s",a:"s",entity:"&nabla;",number:"&#8711;"},{char:"∈",b:"s",a:"s",entity:"&isin;",number:"&#8712;"},{char:"∉",b:"s",a:"s",entity:"&notin;",number:"&#8713;"},{char:"∋",b:"s",a:"s",entity:"&ni;",number:"&#8715;"},{char:"∏",b:"s",a:"s",entity:"&prod;",number:"&#8719;"},{char:"∑",b:"s",a:"s",entity:"&sum;",number:"&#8721;"},{char:"−",b:"s",a:"s",entity:"&minus;",number:"&#8722;"},{char:"∗",b:"s",a:"s",entity:"&lowast;",number:"&#8727;"},{char:"√",b:"s",a:"s",entity:"&radic;",number:"&#8730;"},{char:"∝",b:"s",a:"s",entity:"&prop;",number:"&#8733;"},{char:"∞",b:"s",a:"s",entity:"&infin;",number:"&#8734;"},{char:"∠",b:"s",a:"s",entity:"&ang;",number:"&#8736;"},{char:"∧",b:"s",a:"s",entity:"&and;",number:"&#8743;"},{char:"∨",b:"s",a:"s",entity:"&or;",number:"&#8744;"},{char:"∩",b:"s",a:"s",entity:"&cap;",number:"&#8745;"},{char:"∪",b:"s",a:"s",entity:"&cup;",number:"&#8746;"},{char:"∫",b:"s",a:"s",entity:"&int;",number:"&#8747;"},{char:"∴",b:"s",a:"s",entity:"&there4;",number:"&#8756;"},{char:"∼",b:"s",a:"s",entity:"&sim;",number:"&#8764;"},{char:"≅",b:"s",a:"s",entity:"&cong;",number:"&#8773;"},{char:"≈",b:"s",a:"s",entity:"&asymp;",number:"&#8776;"},{char:"≠",b:"s",a:"s",entity:"&ne;",number:"&#8800;"},{char:"≡",b:"s",a:"s",entity:"&equiv;",number:"&#8801;"},{char:"≤",b:"s",a:"s",entity:"&le;",number:"&#8804;"},{char:"≥",b:"s",a:"s",entity:"&ge;",number:"&#8805;"},{char:"⊂",b:"s",a:"s",entity:"&sub;",number:"&#8834;"},{char:"⊃",b:"s",a:"s",entity:"&sup;",number:"&#8835;"},{char:"⊄",b:"s",a:"s",entity:"&nsub;",number:"&#8836;"},{char:"⊆",b:"s",a:"s",entity:"&sube;",number:"&#8838;"},{char:"⊇",b:"s",a:"s",entity:"&supe;",number:"&#8839;"},{char:"⊕",b:"s",a:"s",entity:"&oplus;",number:"&#8853;"},{char:"⊗",b:"s",a:"s",entity:"&otimes;",number:"&#8855;"},{char:"⊥",b:"s",a:"s",entity:"&perp;",number:"&#8869;"},{char:"⋅",b:"s",a:"s",entity:"&sdot;",number:"&#8901;"},{char:"Α",b:"s",a:"s",entity:"&Alpha;",number:"&#913;"},{char:"Β",b:"s",a:"s",entity:"&Beta;",number:"&#914;"},{char:"Γ",b:"s",a:"s",entity:"&Gamma;",number:"&#915;"},{char:"Δ",b:"s",a:"s",entity:"&Delta;",number:"&#916;"},{char:"Ε",b:"s",a:"s",entity:"&Epsilon;",number:"&#917;"},{char:"Ζ",b:"s",a:"s",entity:"&Zeta;",number:"&#918;"},{char:"Η",b:"s",a:"s",entity:"&Eta;",number:"&#919;"},{char:"Θ",b:"s",a:"s",entity:"&Theta;",number:"&#920;"},{char:"Ι",b:"s",a:"s",entity:"&Iota;",number:"&#921;"},{char:"Κ",b:"s",a:"s",entity:"&Kappa;",number:"&#922;"},{char:"Λ",b:"s",a:"s",entity:"&Lambda;",number:"&#923;"},{char:"Μ",b:"s",a:"s",entity:"&Mu;",number:"&#924;"},{char:"Ν",b:"s",a:"s",entity:"&Nu;",number:"&#925;"},{char:"Ξ",b:"s",a:"s",entity:"&Xi;",number:"&#926;"},{char:"Ο",b:"s",a:"s",entity:"&Omicron;",number:"&#927;"},{char:"Π",b:"s",a:"s",entity:"&Pi;",number:"&#928;"},{char:"Ρ",b:"s",a:"s",entity:"&Rho;",number:"&#929;"},{char:"Σ",b:"s",a:"s",entity:"&Sigma;",number:"&#931;"},{char:"Τ",b:"s",a:"s",entity:"&Tau;",number:"&#932;"},{char:"Υ",b:"s",a:"s",entity:"&Upsilon;",number:"&#933;"},{char:"Φ",b:"s",a:"s",entity:"&Phi;",number:"&#934;"},{char:"Χ",b:"s",a:"s",entity:"&Chi;",number:"&#935;"},{char:"Ψ",b:"s",a:"s",entity:"&Psi;",number:"&#936;"},{char:"Ω",b:"s",a:"s",entity:"&Omega;",number:"&#937;"},{char:"α",b:"s",a:"s",entity:"&alpha;",number:"&#945;"},{char:"β",b:"s",a:"s",entity:"&beta;",number:"&#946;"},{char:"γ",b:"s",a:"s",entity:"&gamma;",number:"&#947;"},{char:"δ",b:"s",a:"s",entity:"&delta;",number:"&#948;"},{char:"ε",b:"s",a:"s",entity:"&epsilon;",number:"&#949;"},{char:"ζ",b:"s",a:"s",entity:"&zeta;",number:"&#950;"},{char:"η",b:"s",a:"s",entity:"&eta;",number:"&#951;"},{char:"θ",b:"s",a:"s",entity:"&theta;",number:"&#952;"},{char:"ι",b:"s",a:"s",entity:"&iota;",number:"&#953;"},{char:"κ",b:"s",a:"s",entity:"&kappa;",number:"&#954;"},{char:"λ",b:"s",a:"s",entity:"&lambda;",number:"&#955;"},{char:"μ",b:"s",a:"s",entity:"&mu;",number:"&#956;"},{char:"ν",b:"s",a:"s",entity:"&nu;",number:"&#957;"},{char:"ξ",b:"s",a:"s",entity:"&xi;",number:"&#958;"},{char:"ο",b:"s",a:"s",entity:"&omicron;",number:"&#959;"},{char:"π",b:"s",a:"s",entity:"&pi;",number:"&#960;"},{char:"ρ",b:"s",a:"s",entity:"&rho;",number:"&#961;"},{char:"ς",b:"s",a:"s",entity:"&sigmaf;",number:"&#962;"},{char:"σ",b:"s",a:"s",entity:"&sigma;",number:"&#963;"},{char:"τ",b:"s",a:"s",entity:"&tau;",number:"&#964;"},{char:"υ",b:"s",a:"s",entity:"&upsilon;",number:"&#965;"},{char:"φ",b:"s",a:"s",entity:"&phi;",number:"&#966;"},{char:"χ",b:"s",a:"s",entity:"&chi;",number:"&#967;"},{char:"ψ",b:"s",a:"s",entity:"&psi;",number:"&#968;"},{char:"ω",b:"s",a:"s",entity:"&omega;",number:"&#969;"},{char:"ϑ",b:"s",a:"s",entity:"&thetasym;",number:"&#977;"},{char:"ϒ",b:"s",a:"s",entity:"&upsih;",number:"&#978;"},{char:"ϖ",b:"s",a:"s",entity:"&piv;",number:"&#982;"},{char:"Œ",b:"s",a:"s",entity:"&OElig;",number:"&#338;"},{char:"œ",b:"s",a:"s",entity:"&oelig;",number:"&#339;"},{char:"Š",b:"s",a:"s",entity:"&Scaron;",number:"&#352;"},{char:"š",b:"s",a:"s",entity:"&scaron;",number:"&#353;"},{char:"Ÿ",b:"s",a:"s",entity:"&Yuml;",number:"&#376;"},{char:"ƒ",b:"s",a:"s",entity:"&fnof;",number:"&#402;"},{char:"ˆ",b:"s",a:"s",entity:"&circ;",number:"&#710;"},{char:"˜",b:"s",a:"s",entity:"&tilde;",number:"&#732;"},{char:" ",b:"s",a:"s",entity:"&ensp;",number:"&#8194;"},{char:" ",b:"s",a:"s",entity:"&emsp;",number:"&#8195;"},{char:"",b:"s",a:"s",entity:"&thinsp;",number:"&#8201;"},{char:"",b:"s",a:"s",entity:"&zwnj;",number:"&#8204;"},{char:"",b:"s",a:"s",entity:"&zwj;",number:"&#8205;"},{char:"",b:"s",a:"s",entity:"&lrm;",number:"&#8206;"},{char:"",b:"s",a:"s",entity:"&rlm;",number:"&#8207;"},{char:"–",b:"s",a:"s",entity:"&ndash;",number:"&#8211;"},{char:"—",b:"s",a:"s",entity:"&mdash;",number:"&#8212;"},{char:"‘",b:"s",a:"s",entity:"&lsquo;",number:"&#8216;"},{char:"’",b:"s",a:"s",entity:"&rsquo;",number:"&#8217;"},{char:"‚",b:"s",a:"s",entity:"&sbquo;",number:"&#8218;"},{char:"“",b:"s",a:"s",entity:"&ldquo;",number:"&#8220;"},{char:"”",b:"s",a:"s",entity:"&rdquo;",number:"&#8221;"},{char:"„",b:"s",a:"s",entity:"&bdquo;",number:"&#8222;"},{char:"†",b:"s",a:"s",entity:"&dagger;",number:"&#8224;"},{char:"‡",b:"s",a:"s",entity:"&Dagger;",number:"&#8225;"},{char:"•",b:"s",a:"s",entity:"&bull;",number:"&#8226;"},{char:"…",b:"s",a:"s",entity:"&hellip;",number:"&#8230;"},{char:"‰",b:"s",a:"s",entity:"&permil;",number:"&#8240;"},{char:"′",b:"s",a:"s",entity:"&prime;",number:"&#8242;"},{char:"″",b:"s",a:"s",entity:"&Prime;",number:"&#8243;"},{char:"‹",b:"s",a:"s",entity:"&lsaquo;",number:"&#8249;"},{char:"›",b:"s",a:"s",entity:"&rsaquo;",number:"&#8250;"},{char:"‾",b:"s",a:"s",entity:"&oline;",number:"&#8254;"},{char:"€",b:"s",a:"s",entity:"&euro;",number:"&#8364;"},{char:"™",b:"s",a:"s",entity:"&trade;",number:"&#8482;"},{char:"←",b:"s",a:"s",entity:"&larr;",number:"&#8592;"},{char:"↑",b:"s",a:"s",entity:"&uarr;",number:"&#8593;"},{char:"→",b:"s",a:"s",entity:"&rarr;",number:"&#8594;"},{char:"↓",b:"s",a:"s",entity:"&darr;",number:"&#8595;"},{char:"↔",b:"s",a:"s",entity:"&harr;",number:"&#8596;"},{char:"↵",b:"s",a:"s",entity:"&crarr;",number:"&#8629;"},{char:"⌈",b:"s",a:"s",entity:"&lceil;",number:"&#8968;"},{char:"⌉",b:"s",a:"s",entity:"&rceil;",number:"&#8969;"},{char:"⌊",b:"s",a:"s",entity:"&lfloor;",number:"&#8970;"},{char:"⌋",b:"s",a:"s",entity:"&rfloor;",number:"&#8971;"},{char:"◊",b:"s",a:"s",entity:"&loz;",number:"&#9674;"},{char:"♠",b:"s",a:"s",entity:"&spades;",number:"&#9824;"},{char:"♣",b:"s",a:"s",entity:"&clubs;",number:"&#9827;"},{char:"♥",b:"s",a:"s",entity:"&hearts;",number:"&#9829;"},{char:"♦",b:"s",a:"s",entity:"&diams;",number:"&#9830;"}],o=[new a("l",1),new a("o",2),new a("u",4),new a("d",4),new a("s",3),new a("n",0)],
y=["h1","h2","h3","h4","h5","h6","p"],p=function(t){let r=this,n=!0,a=y,s=document.createElement("div"),b={};return s.setAttribute("id","KernBotOutput"),document.body.appendChild(s),t!==e&&(t.track!==e&&(n=t.track),t.selectors!==e&&(a=t.selectors),t.outputID!==e&&(s=r._getDocumentElement(t.outputID)[0])),b={track:n,selectors:a,output:s},new p.init(b,l,m,o)};p.init=function(t,e,r,n){this.strokes=n,this.strokePairs=this._buildPairsData("strokes"),this.characters=this._buildStrokeData(e),this.entities=this._buildStrokeData(r),this.characterPairs=this._buildPairsData("characters"),this.track=t.track,this.selectors=t.selectors,this.output=t.output,this.HTMLelements=this._gatherElements(this.selectors),this.elmRegEx=new RegExp("(<(.|\n)*?>|&(.|\n)*?;)","g"),this.sequences=[],this.nodes=[],this.nodePairs=[],console.log(this),console.log(this.strokePairs),console.log(this.characterPairs),console.log(this.entities),console.log("=========================")},p.prototype.kern=function(){let t=this;for(let e=0;e<t.HTMLelements.length&&!t._checkElementKerned(t.HTMLelements[e]);e++){let r=t.HTMLelements[e],n=r.innerHTML,a=t._stringToSequence(r,n),s="";s=t._prepareHTMLString(a[0]),t._updateElementHTML(r,s),t.sequences.push(new u(r,n,s,a[0])),t.track&&t._update(r,a)}return console.log(t),t},p.prototype.log=function(t){return console.log(t)},p.prototype._buildStrokeData=function(t){let e=[];for(let n=0;n<t.length;n++){let a=this._getLegendData(t[n].b,"code",this.strokes),s=this._getLegendData(t[n].a,"code",this.strokes);e.push(new r(t[n].char,a,s,t[n].entity,t[n].number))}return e},p.prototype._buildPairsData=function(t){let e=[];for(let r=0;r<this[t].length;r++)switch(this[t][r].constructor.name){case"Character":for(let a=0;a<this[t].length;a++){let s=this._getLegendData(this[t][r].strokes.a.code+this[t][a].strokes.a.code,"key",this.strokePairs);e.push(new n(this[t][r],this[t][a],s))}break;case"Stroke":for(let n=0;n<this[t].length;n++)e.push(new s(this[t][r],this[t][n]));break;default:return!1}return e},p.prototype._sortBy=function(t,e,r){var n=r?function(e){return r(e[t])}:function(e){return e[t]};return e=e?-1:1,function(t,r){return t=n(t),r=n(r),e*((t>r)-(r>t))}},p.prototype._getLegendData=function(t,e,r){let n=null;for(let a=0;a<r.length;a++)r[a][e]===t&&(n=r[a]);return null!==n&&n},p.prototype._gatherElements=function(t){let e=[];for(let r=0;r<t.length;r++){let n=this._getDocumentElement(t[r]);for(let t=0;t<n.length;t++)e.push(n[t])}return e},p.prototype._getDocumentElement=function(t){let e=[];switch(t.substring(0,1)){case"#":let r=document.getElementById(t.substring(1));e.push(r);break;case".":let n=document.getElementsByClassName(t.substring(1));for(let t=0;t<n.length;t++)e.push(n[t]);break;default:let a=document.getElementsByTagName(t.toUpperCase());for(let t=0;t<a.length;t++)e.push(a[t])}return e},p.prototype._isElement=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},p.prototype._isNode=function(t){return"object"==typeof c?t instanceof c:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},p.prototype._toNodes=function(t){return(new DOMParser).parseFromString(t,"text/html").body.childNodes||!1},p.prototype._checkElementKerned=function(t){for(let e=0;e<this.sequences.length;e++)return this.sequences[e].context===t},p.prototype._checkInjectIndex=function(t,e){for(let r=0;r<e.length;r++)if(e[r].indexes[0]<=t&&t<e[r].indexes[1])return e[r];return!1},p.prototype._stringToSequence=function(t,e){let r=[],n=[],a=[],s=new RegExp("<(.|\n)*?>","g"),u=new RegExp("&(.|\n)*?;","g"),l=e.match(s)||[],m=e.match(u)||[],o=l.concat(m);e.replace(u,"").replace(s,"");for(let r=0;o&&r<o.length;r++){let n=e.indexOf(o[r]),s=n+o[r].length,i=e.slice(n,s),c=u.test(i)||!1;a.push(new b(t,e,i,n,s,c))}let y=!1,p=0;for(let s=0;s<e.length;s++){this._getLegendData(e[s-1],"char",this.characters);let b=this._getLegendData(e[s],"char",this.characters)||!1,u=this._getLegendData(e[s+1],"char",this.characters)||!1,l=!1,m=this._checkInjectIndex(s,a),o=this._checkInjectIndex(s+1,a),g=!1,d=null,f=null;p++,b&&!m&&(d=new c(t,b,p),r.push(d),b&&u&&(l=this._getLegendData(b.char+u.char,"pair",this.characterPairs),f=new h(t,l,p),d._addKerning(f.kern),n.push(f))),o&&!m&&(y=o.char.slice(-1),o.isEntity&&(g=this._getLegendData(o.char,"entity",this.entities)||this._getLegendData(o.char,"number",this.entities),b&&g&&(l=this._getLegendData(b.char+g.char,"pair",this.characterPairs),f=new h(t,l,p),d._addKerning(f.kern),n.push(f)))),m&&(o||e[s]!=y||(p-=m.char.length-1,m.isEntity?(g=this._getLegendData(m.char,"entity",this.entities)||this._getLegendData(m.char,"number",this.entities),d=new c(t,g,p),g&&u&&(l=this._getLegendData(g.char+u.char,"pair",this.characterPairs),f=new h(t,l,p),d._addKerning(f.kern),n.push(f))):d=new i(t,m,p),r.push(d)))}return[r,n]},p.prototype._prepareHTMLString=function(t){let e="";for(let r=0;r<t.length;r++)switch(t[r].constructor.name){case"Tag":let n=this._toNodes(t[r].char)[0],a=t[r].char;this._isElement(n)&&(n.classList.add("element-"+t[r].class.substring(5)),a=n.outerHTML.match(this.elmRegEx)[0]),e+=a;break;default:e+='<span class="'+t[r].class+'"',e+='style="letter-spacing:-'+t[r].kerning+'px;">',e+=t[r].char,e+="</span>"}return e},p.prototype._updateElementHTML=function(t,e){return t.innerHTML=e},p.prototype._update=function(t,e){let r=e[0],n=e[1];for(let e=0;e<r.length;e++)this._trackNode(t,e+1,r[e]);for(let e=0;e<n.length;e++)this._trackNode(t,e+1,n[e],!0);return this},p.prototype._trackNode=function(t,e,r,n=!1){let a=null;if(a=n?this._returnSameNodePairExists(t,r):this._returnSameNodeExists(t,r))return a._increaseCount(1),a._addCharIndex(e),0;switch(!n){case!0:return this.nodes.push(r);case!1:return this.nodePairs.push(r);default:return"an error occured trying to track the node"}},p.prototype._returnSameNodeExists=function(t,e){let r=e.char.toString(),n=e.context,a=e.kerning;for(let t=0;t<this.nodes.length;t++){let e=!1,s=!1,b=!1,i=this.nodes[t],c=this.nodes[t].char,h=this.nodes[t].context,u=this.nodes[t].kerning;if(r===c&&(s=!0),n===h&&(e=!0),a===u&&(b=!0),e&&s&&b)return i}return!1},p.prototype._returnSameNodePairExists=function(t,e){let r=e.pair.toString(),n=e.context,a=e.kerning;for(let t=0;t<this.nodePairs.length;t++){let e=!1,s=!1,b=!1,i=this.nodePairs[t],c=this.nodePairs[t].pair,h=this.nodePairs[t].context,u=this.nodePairs[t].kerning;if(r===c&&(s=!0),n===h&&(e=!0),a===u&&(b=!0),e&&s&&b)return i}return!1},p.prototype.outputSequencesHTML=function(){let t="";for(let e=0;e<this.sequences.length;e++){let r=this.sequences[e],n=r.sequence,a=r.context;t+="&lt;!-- SEQUCENCE ",t+=a.tagName.toUpperCase(),t+="."+a.classList,t+=" --&gt;",t+="<br/>";for(let e=0;e<n.length;e++)switch(n[e].constructor.name){case"Tag":let r=this._toNodes(n[e].char)[0],a=n[e].char;this._isElement(r)&&(r.classList.add("element-"+n[e].class.substring(5)),a=r.outerHTML.match(this.elmRegEx)[0]),t+="&lt;",t+=a.slice(1,-1),t+="&gt;",t+="<br/>";break;default:t+="&lt;",t+='span class="'+n[e].class+'" ',t+='style="letter-spacing:-'+n[e].kerning+'px;"',t+="&gt;",t+=n[e].char,t+="&lt;",t+="/span",t+="&gt;",t+="<br/>"}t+="<br/>"}return this._updateElementHTML(this.output,t)},p.prototype.outputSequencesCSS=function(){let t="";for(let e=0;e<this.sequences.length;e++){let r=this.sequences[e],n=r.sequence,a=r.context.tagName,s=r.context.getAttribute("class")||!1,b=r.context.getAttribute("id")||!1;t+="/* SEQUCENCE "+a.toUpperCase()+" */",t+="<br/>";for(let e=0;e<n.length;e++)if(t+=a.toLowerCase(),s&&(t+="."+s),b&&(t+="#"+b),t+=" ","Tag"==n[e].constructor.name||"Element"==n[e].data.constructor.name){let r=this._toNodes(n[e].char)[0]||!1,a=!1;r&&(a=r.tagName.toLowerCase()),a&&(t+=a+".element-"+n[e].class.substring(5),t+=" ",t+="{ letter-spacing: 0px; }",t+="<br/>")}else t+="span."+n[e].class+" {",t+=" ",t+="letter-spacing: -"+n[e].kerning+"px;",t+=" ",t+="}",t+="<br/>";t+="<br/>"}return this._updateElementHTML(this.output,t)},p.prototype.writeNodePairsToHTML=function(){let t="<ul>";for(let e=0;e<this.nodePairs.length;e++){let r=this.nodePairs[e],n=r.context.tagName.toLowerCase();t+="<li>",t+="<"+n+">",t+="“",t+='<span style="letter-spacing:'+r.letterSpace+';">',t+=r.c1.char,t+="</span>",t+="<span>",t+=r.c2.char,t+="</span>",t+="”",t+="</"+n+">",t+='<hr style="margin: 1em 0em">',t+="<p>",t+="HTML context: ",t+="&lt;"+n+"&gt;",t+="<br>",t+="Kern Weight: ",t+=r.weight,t+="<br>",t+="Letter Spacing: ",t+=r.letterSpace+"",t+="<br>",t+="Occurrences: ",t+=r.count,t+="</p>",t+="</li>"}return t+="</ul>",this._updateElementHTML(this.output,t)},p.init.prototype=p.prototype,t.KernBot=t.$KB=p}(window,void 0);